<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Fun on the Fridge – Beato's Deli</title>
  <style>
    body {
      text-align: center;
      font-family: sans-serif;
    }

    #magnet-area {
      margin: 40px auto;
      width: 90%;
      min-height: 300px;
      border: 1px dashed #aaa;
      padding: 10px;
      position: relative;
    }

    .magnet {
      display: inline-block;
      padding: 5px 8px;
      margin: 4px;
      background: white;
      border: 1px solid black;
      font-size: 14px;
      cursor: grab;
      position: absolute;
    }

    a.back {
      display: inline-block;
      margin-top: 20px;
      text-decoration: none;
      color: blue;
    }
  </style>
</head>
<body>

<h1>Fridge Magnet Poetry</h1>
<p>Drag the words to make a poem. Or don't. I don't care. A new theme appears every day.</p>

<div id="magnet-area"></div>

<a class="back" href="index.html">← Back to Beato's Deli</a>

<script>
// Small daily themes (simple + short)
const themes = {
  medieval: ["castle","sword","dragon","gold","moon","quest"],
  mountains: ["peak","ridge","pine","cloud","echo","stone"],
  ocean: ["wave","salt","blue","tide","shell","deep"],
  deli: ["bagel","coffee","city","steam","window","toast"]
};

// Pick theme based on calendar day
const themeNames = Object.keys(themes);
const todayTheme = themeNames[new Date().getDate() % themeNames.length];
const words = themes[todayTheme];

const area = document.getElementById("magnet-area");

// GLOBAL drag variables (must be OUTSIDE the loop)
let activeMagnet = null;
let offsetX = 0;
let offsetY = 0;

// Create randomly placed draggables
words.forEach(word => {
  const el = document.createElement("div");
  el.className = "magnet";
  el.textContent = word;

  // random starting position
  el.style.left = Math.random() * 70 + "%";
  el.style.top = Math.random() * 60 + "px";

  // CLICK-TO-PICK-UP / CLICK-TO-RELEASE
// PICK-UP / RELEASE with cursor directly on magnet
el.onmousedown = function(e) {
  activeMagnet = el;
  const rect = el.getBoundingClientRect();
  offsetX = e.clientX - rect.left;
  offsetY = e.clientY - rect.top;
  el.style.zIndex = 1000; // bring to front
  el.style.boxShadow = "0 6px 12px rgba(0,0,0,0.2)";
};

    // If nothing is active → pick this magnet
    if (!activeMagnet) {
      activeMagnet = el;
      const rect = el.getBoundingClientRect();
      offsetX = e.clientX - rect.left;
      offsetY = e.clientY - rect.top;
      el.style.zIndex = 1000; // bring to front
      el.style.boxShadow = "0 6px 12px rgba(0,0,0,0.2)"; // visual highlight
    }
    // If this magnet is already active → drop it
    else if (activeMagnet === el) {
      el.style.zIndex = 1;
      el.style.boxShadow = "";
      activeMagnet = null;
    }
    // If another magnet was active → switch to this one
    else {
      // drop previous
      activeMagnet.style.zIndex = 1;
      activeMagnet.style.boxShadow = "";
      // pick this one
      activeMagnet = el;
      const rect = el.getBoundingClientRect();
      offsetX = e.clientX - rect.left;
      offsetY = e.clientY - rect.top;
      el.style.zIndex = 1000;
      el.style.boxShadow = "0 6px 12px rgba(0,0,0,0.2)";
    }
  });

  area.appendChild(el);
});

// Move active magnet with mouse
document.addEventListener("mousemove", function(e) {
  if (activeMagnet) {
    // keep magnet within window (basic clamping)
    const x = Math.max(0, Math.min(window.innerWidth - activeMagnet.offsetWidth, e.pageX - offsetX));
    const y = Math.max(0, Math.min(window.innerHeight - activeMagnet.offsetHeight, e.pageY - offsetY));
    activeMagnet.style.left = x + "px";
    activeMagnet.style.top = y + "px";
  }
});

// Click anywhere to release (also works if user clicks space outside magnets)
document.addEventListener('click', function() {
  if (activeMagnet) {
    activeMagnet.style.zIndex = 1;
    activeMagnet.style.boxShadow = "";
    activeMagnet = null;
  }
});

// --- OPTIONAL: basic touch support (tap to pick up, tap anywhere to drop, drag to move) ---
document.addEventListener('touchstart', function(e) {
  if (!e.target.classList || !e.target.classList.contains('magnet')) {
    // touching empty space should drop active magnet
    if (activeMagnet) {
      activeMagnet.style.zIndex = 1;
      activeMagnet.style.boxShadow = "";
      activeMagnet = null;
    }
  }
}, {passive: true});

document.addEventListener('touchmove', function(e) {
  if (activeMagnet && e.touches && e.touches[0]) {
    const t = e.touches[0];
    const x = Math.max(0, Math.min(window.innerWidth - activeMagnet.offsetWidth, t.pageX - offsetX));
    const y = Math.max(0, Math.min(window.innerHeight - activeMagnet.offsetHeight, t.pageY - offsetY));
    activeMagnet.style.left = x + "px";
    activeMagnet.style.top = y + "px";
    e.preventDefault();
  }
}, {passive: false});
</script>


</body>
</html>
